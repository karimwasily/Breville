<sly data-sly-use.carousel="com.adobe.cq.wcm.core.components.models.Carousel"></sly>
<sly data-sly-use.placeholderTemplate="core/wcm/components/commons/v1/templates.html" data-sly-test.hasContent="${properties.fileReference}"></sly>


<div data-panelcontainer="${wcmmode.edit && 'carousel'}" id="${carousel.id}" class="cmp-carouselwithtext cmp-carousel" role="group"
    aria-live="polite" aria-roledescription="carousel" data-cmp-is="carousel" data-cmp-autoplay="${(wcmmode.edit || wcmmode.preview) ? '' : carousel.autoplay}"
    data-cmp-delay="${carousel.delay}" data-cmp-autopause-disabled="${carousel.autopauseDisabled}" data-cmp-data-layer="${carousel.data.json}">
    <div data-sly-test="${carousel.items && carousel.items.size > 0}" class="cmp-carouselwithtext__content" aria-atomic="false"
        aria-live="${carousel.autoplay ? 'off' : 'polite'}">
        <div data-sly-repeat.item="${carousel.items}" data-sly-resource="${item.name @ decorationTagName='div'}"
            id="${item.id}" class="cmp-carouselwithtext__item cmp-carousel__item${itemList.first ? ' cmp-carousel__item--active cmp-carouselwithtext__item-first' : ''}${itemList.last ? ' cmp-carousel__item-last' : ''}"
            role="tabpanel" aria-roledescription="slide" data-cmp-data-layer="${item.data.json}" data-cmp-hook-carousel="item">
        </div>
        <div class="cmp-carouselwithtext__actions" data-sly-test="${carousel.items.size > 1}">
            <button class="cmp-carouselwithtext__action cmp-carouselwithtext__action--previous cmp-carousel__action--previous" type="button" data-cmp-hook-carousel="previous" style="visibility: hidden"aria-label="${'br-previous' @ i18n}">${'br-previous' @ i18n}</button>
            <button class="cmp-carouselwithtext__action cmp-carouselwithtext__action--next cmp-carousel__action--next" type="button" data-cmp-hook-carousel="next" aria-label="${'br-next' @ i18n}">${'br-next' @ i18n}</button>
        </div>
        <div class="cmp-carouselwithtext__text-wrapper">
            <h2 class="cmp-carouselwithtext__title">${properties.title}</h2>
            <div class="cmp-carouselwithtext__description">${properties.description @ context='html'}</div>
        </div>
        <ol class="cmp-carouselwithtext__indicators"
            role="tablist"
            aria-label="${'Choose a slide to display' @ i18n}"
            data-cmp-hook-carousel="indicators">
            <li data-sly-repeat.item="${carousel.items}"
                id="${item.id}-tab"
                class="cmp-carousel__indicator${itemList.first ? ' cmp-carousel__indicator--active' : ''}"
                role="tab"
                aria-label="${'Slide {0}' @ format=[itemList.count], i18n}"
                data-cmp-hook-carousel="indicator">${item.title}</li>
        </ol>
    </div>
    <sly data-sly-resource="${resource.path @ resourceType='wcm/foundation/components/parsys/newpar', appendPath='/*', decorationTagName='div', cssClassName='new section aem-Grid-newComponent'}"
        data-sly-test="${(wcmmode.edit || wcmmode.preview) && carousel.items.size < 1}"></sly>
</div>